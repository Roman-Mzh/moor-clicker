(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(c){if(c.ep)return;c.ep=!0;const r=n(c);fetch(c.href,r)}})();const x={Card1:{id:"Card1",title:"Трактор",initialPrice:100,initialCpm:5,pic:"trtr"},Card2:{id:"Card2",title:"Песок",initialPrice:80,initialCpm:3,pic:"sand"},Card3:{id:"Card3",title:"Дачнег",initialPrice:120,initialCpm:1,pic:"drovosek"},Card4:{id:"Card4",title:"Сваи",initialPrice:320,initialCpm:14,pic:"svai"},Card5:{id:"Card5",title:"Бытовка",initialPrice:100,initialCpm:1,pic:"byt"},Card6:{id:"Card6",title:"Дрова",initialPrice:20,initialCpm:1,pic:"drova"}},E="/moor-clicker/assets/byt-DuUB1dve.jpg",L="/moor-clicker/assets/coin-DHADmtpw.jpg",w="/moor-clicker/assets/drova-B1_3CkoW.jpg",j="/moor-clicker/assets/drovosek-0Gu3FA4h.jpg",P="/moor-clicker/assets/sand-NAU3yeRp.jpg",I="/moor-clicker/assets/svai-C0htLECH.jpg",$="/moor-clicker/assets/trtr-DE8-K9Tz.jpg",y=()=>{const e=document.querySelector("#balance"),t=document.querySelector("#coin"),n=document.querySelector("#income"),s=document.querySelector("#cards");if(!e||!t||!n||!s)throw new Error("oops");return{balance:e,cardsList:s,coin:t,income:n}},z=e=>{const t=document.getElementById(`card-${e}-level`),n=document.getElementById(`card-${e}-income`),s=document.getElementById(`card-${e}-next-income`),c=document.querySelector(`#card-${e}-btn`);if(!t||!n||!s||!c)throw new Error("oops");return{levelLabel:t,incomeLabel:n,nextIncomeLabel:s,btn:c}},S=e=>new URL(Object.assign({"/src/utils/pics/byt.jpg":E,"/src/utils/pics/coin.jpg":L,"/src/utils/pics/drova.jpg":w,"/src/utils/pics/drovosek.jpg":j,"/src/utils/pics/sand.jpg":P,"/src/utils/pics/svai.jpg":I,"/src/utils/pics/trtr.jpg":$})[`/src/utils/pics/${e}.jpg`],import.meta.url).href,T=e=>{const{pic:t,title:n,id:s}=e;return`<div class="col-6 flex-grow-1">
    <div class="border rounded-2 p-2 vstack h-100 overflow-hidden">
      <div class="d-flex flex-grow-1 mx-n2 mt-n2" style="max-height: 120px;">
        <img class="img-fluid" src="${S(t)}" style="object-fit: cover;" />
      </div>
      <div class="d-flex justify-content-between align-items-center w-100">
        <div class="fs-4">${n}</div>
        <div class="badge text-bg-light" id="card-${s}-level"></div>
      </div>
      <div class="vstack align-items-center flex-grow-0">
        <div class="h6" id="card-${s}-income"></div>
        <div class="h6 text-success" id="card-${s}-next-income"></div>
      </div>
      <button id="card-${s}-btn" class="btn"></button>
    </div>
  </div>`},M=(e,t)=>{const n=document.createElement("div");n.style.left=`${e-15}px`,n.style.top=`${t-15}px`,n.style.position="absolute",n.classList.add("moor-bubble"),n.innerText="+1",document.body.appendChild(n),n.getBoundingClientRect(),n.style.transform=`translate(${Math.round(Math.random()*80)-40}px, -100px)`,n.style.opacity="0",setTimeout(n.remove,1e3)},k=1.1,D=1.6,O=60,C=(e,t)=>{const{initialCpm:n,initialPrice:s}=x[e],c=t>0?n*k**t:n;return{nextPrice:t>0?s*D**t:s,nextCpm:c}},R=(e,t)=>Array.from({length:t}).reduce((n,s,c)=>n+C(e,c).nextCpm,0),f=e=>e.toLocaleString("RU-ru",{style:"currency",currency:"rub",maximumFractionDigits:2}),b=(e,t)=>"+"+e.toLocaleString("RU-ru",{maximumFractionDigits:2})+(t?"&uarr;":""),u=["Card1","Card2","Card3","Card4","Card5","Card6"],A=e=>{const{coin:t,balance:n,income:s}=y(),c=()=>{const{realCoinz:r,lastEvent:o}=e.getState();n.innerText=f(r),s.innerText=b(o.totalIncome),u.forEach(i=>{const a=o.cards[i],{nextCpm:p,nextPrice:v}=C(i,a),l=o.income[i],g=v>Math.max(o.totalIncome,r),{levelLabel:m,incomeLabel:_,nextIncomeLabel:h,btn:d}=z(i);m.innerText=String(a),a>0&&(m.classList.add("text-bg-success"),m.classList.remove("text-bg-light")),_.innerText=b(l),h.innerHTML=b(p,!0),d.innerText=f(v),d.disabled=g,g?(d.classList.remove("btn-primary"),d.classList.add("btn-outline-secondary")):(d.classList.remove("btn-outline-secondary"),d.classList.add("btn-primary"))})};setInterval(c,1e3),u.forEach(r=>{const o=document.getElementById(`card-${r}-btn`);if(!o)throw new Error("oops, no card");o.addEventListener("click",()=>{e.upCard(r),c()})}),t.addEventListener("click",({clientX:r,clientY:o})=>{e.click(),M(r,o),c()}),t.addEventListener("mousedown",({offsetX:r,offsetY:o})=>{const i=Math.round((r-60)/2),a=Math.round((o-60)/2);t.style.transform=`rotateX(${-a}deg) rotateY(${i}deg)`,t.classList.remove("shadow")}),t.addEventListener("mouseup",()=>{t.style.transform="",t.classList.add("shadow")})},B=()=>{let e=0;const t={},n={};return u.forEach(s=>{const r=R(s,0);t[s]=0,n[s]=r,e+=r}),{cards:t,income:n,totalIncome:e}},G=()=>{const e={coinz:999,timestamp:Date.now(),...B()},t=[],n=()=>{t.push(e)},s=()=>{const o=t.at(-1);if(!o)throw new Error("could not start game");const i=Date.now(),a=o.coinz+(i-o.timestamp)/(1e3*O)*o.totalIncome;return{lastEvent:o,realCoinz:a}},c=()=>{const{lastEvent:o,realCoinz:i}=s(),a={...o,coinz:Math.max(i,o.coinz)+10,timestamp:Date.now()};return t.push(a),a},r=o=>{const{lastEvent:i,realCoinz:a}=s(),{nextPrice:p,nextCpm:v}=C(o,i.cards[o]);if(p>Math.max(a,i.coinz))throw new Error("not enough coinz");const l={...i,cards:{...i.cards,[o]:i.cards[o]+=1},coinz:Math.max(a,i.coinz)-p,timestamp:Date.now()};return l.income={...l.income,[o]:l.income[o]+v},l.totalIncome=u.reduce((g,m)=>g+=l.income[m],0),t.push(l),l};return n(),{getState:s,click:c,upCard:r}},N=()=>{const e=G(),{balance:t,cardsList:n,income:s}=y();(()=>{const{realCoinz:r,lastEvent:o}=e.getState();t.innerText=f(r),s.innerText=b(o.totalIncome),n.innerHTML=u.map(i=>T(x[i])).join("")})(),A(e)};N();
