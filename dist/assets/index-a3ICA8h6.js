(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(c){if(c.ep)return;c.ep=!0;const o=i(c);fetch(c.href,o)}})();const _={Card1:{id:"Card1",title:"Трактор",initialPrice:100,initialCpm:5,pic:"trtr"},Card2:{id:"Card2",title:"Песок",initialPrice:80,initialCpm:3,pic:"sand"},Card3:{id:"Card3",title:"Дачнег",initialPrice:120,initialCpm:1,pic:"drovosek"},Card4:{id:"Card4",title:"Сваи",initialPrice:320,initialCpm:14,pic:"svai"},Card5:{id:"Card5",title:"Бытовка",initialPrice:100,initialCpm:1,pic:"byt"},Card6:{id:"Card6",title:"Дрова",initialPrice:20,initialCpm:1,pic:"drova"}},E="/moor-clicker/assets/byt-DuUB1dve.jpg",L="/moor-clicker/assets/coin-DHADmtpw.jpg",w="/moor-clicker/assets/drova-B1_3CkoW.jpg",j="/moor-clicker/assets/drovosek-0Gu3FA4h.jpg",P="/moor-clicker/assets/sand-NAU3yeRp.jpg",I="/moor-clicker/assets/svai-C0htLECH.jpg",z="/moor-clicker/assets/trtr-DE8-K9Tz.jpg",h=()=>{const e=document.querySelector("#balance"),t=document.querySelector("#coin"),i=document.querySelector("#income"),r=document.querySelector("#cards");if(!e||!t||!i||!r)throw new Error("oops");return{balance:e,cardsList:r,coin:t,income:i}},$=e=>{const t=document.getElementById(`card-${e}-level`),i=document.getElementById(`card-${e}-income`),r=document.getElementById(`card-${e}-next-income`),c=document.querySelector(`#card-${e}-btn`);if(!t||!i||!r||!c)throw new Error("oops");return{levelLabel:t,incomeLabel:i,nextIncomeLabel:r,btn:c}},k=e=>new URL(Object.assign({"/src/utils/pics/byt.jpg":E,"/src/utils/pics/coin.jpg":L,"/src/utils/pics/drova.jpg":w,"/src/utils/pics/drovosek.jpg":j,"/src/utils/pics/sand.jpg":P,"/src/utils/pics/svai.jpg":I,"/src/utils/pics/trtr.jpg":z})[`/src/utils/pics/${e}.jpg`],import.meta.url).href,S=e=>{const{pic:t,title:i,id:r}=e;return`<div class="col-6 flex-grow-1">
    <div class="border rounded-2 p-2 vstack h-100 overflow-hidden">
      <div class="d-flex flex-grow-1 mx-n2 mt-n2" style="max-height: 90px;">
        <img class="img-fluid" src="${k(t)}" style="object-fit: cover;" />
      </div>
      <div class="d-flex justify-content-between align-items-center w-100">
        <div class="fs-4">${i}</div>
        <div class="badge text-bg-light" id="card-${r}-level"></div>
      </div>
      <div class="vstack align-items-center flex-grow-0">
        <div class="h6" id="card-${r}-income"></div>
        <div class="h6 text-success" id="card-${r}-next-income"></div>
      </div>
      <button id="card-${r}-btn" class="btn"></button>
    </div>
  </div>`},T=1.1,D=1.6,C=(e,t)=>{const{initialCpm:i,initialPrice:r}=_[e],c=t>0?i*T**t:i;return{nextPrice:t>0?r*D**t:r,nextCpm:c}},M=(e,t)=>Array.from({length:t}).reduce((i,r,c)=>i+C(e,c).nextCpm,0),b=e=>e.toLocaleString("RU-ru",{style:"currency",currency:"rub",maximumFractionDigits:2}),f=(e,t)=>"+"+e.toLocaleString("RU-ru",{maximumFractionDigits:2})+(t?"&uarr;":""),u=["Card1","Card2","Card3","Card4","Card5","Card6"],O=e=>{const{coin:t,balance:i,income:r}=h(),c=()=>{const{realCoinz:o,lastEvent:n}=e.getState();i.innerText=b(o),r.innerText=f(n.totalIncome),u.forEach(s=>{const a=n.cards[s],{nextCpm:p,nextPrice:v}=C(s,a),l=n.income[s],g=v>Math.max(n.totalIncome,o),{levelLabel:m,incomeLabel:x,nextIncomeLabel:y,btn:d}=$(s);m.innerText=String(a),a>0&&(m.classList.add("text-bg-success"),m.classList.remove("text-bg-light")),x.innerText=f(l),y.innerHTML=f(p,!0),d.innerText=b(v),d.disabled=g,g?(d.classList.remove("btn-primary"),d.classList.add("btn-outline-secondary")):(d.classList.remove("btn-outline-secondary"),d.classList.add("btn-primary"))})};setInterval(c,1e3),u.forEach(o=>{const n=document.getElementById(`card-${o}-btn`);if(!n)throw new Error("oops, no card");n.addEventListener("click",()=>{e.upCard(o),c()})}),t.addEventListener("click",()=>{e.click(),c()}),t.addEventListener("mousedown",({offsetX:o,offsetY:n})=>{const s=Math.round((o-60)/2),a=Math.round((n-60)/2);t.style.transform=`rotateX(${-a}deg) rotateY(${s}deg)`,t.classList.remove("shadow")}),t.addEventListener("mouseup",()=>{t.style.transform="",t.classList.add("shadow")})},R=()=>{let e=0;const t={},i={};return u.forEach(r=>{const o=M(r,0);t[r]=0,i[r]=o,e+=o}),{cards:t,income:i,totalIncome:e}},A=()=>{const e={coinz:99999,timestamp:Date.now(),...R()},t=[],i=()=>{t.push(e)},r=()=>{const n=t.at(-1);if(!n)throw new Error("could not start game");const s=Date.now(),a=n.coinz+(s-n.timestamp)/1e3*n.totalIncome;return{lastEvent:n,realCoinz:a}},c=()=>{const{lastEvent:n,realCoinz:s}=r(),a={...n,coinz:Math.max(s,n.coinz)+10,timestamp:Date.now()};return t.push(a),a},o=n=>{const{lastEvent:s,realCoinz:a}=r(),{nextPrice:p,nextCpm:v}=C(n,s.cards[n]);if(p>Math.max(a,s.coinz))throw new Error("not enough coinz");const l={...s,cards:{...s.cards,[n]:s.cards[n]+=1},coinz:Math.max(a,s.coinz)-p,timestamp:Date.now()};return l.income={...l.income,[n]:l.income[n]+v},l.totalIncome=u.reduce((g,m)=>g+=l.income[m],0),t.push(l),l};return i(),{getState:r,click:c,upCard:o}},G=()=>{const e=A(),{balance:t,cardsList:i,income:r}=h();(()=>{const{realCoinz:o,lastEvent:n}=e.getState();t.innerText=b(o),r.innerText=f(n.totalIncome),i.innerHTML=u.map(s=>S(_[s])).join("")})(),O(e)};G();
