(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();const h={Card1:{id:"Card1",title:"Трактор",initialPrice:100,initialCpm:5,pic:"trtr"},Card2:{id:"Card2",title:"Песок",initialPrice:80,initialCpm:3,pic:"sand"},Card3:{id:"Card3",title:"Дачнег",initialPrice:120,initialCpm:1,pic:"drovosek"},Card4:{id:"Card4",title:"Сваи",initialPrice:320,initialCpm:14,pic:"svai"},Card5:{id:"Card5",title:"Бытовка",initialPrice:100,initialCpm:1,pic:"byt"},Card6:{id:"Card6",title:"Дрова",initialPrice:20,initialCpm:1,pic:"drova"}},E="/moor-clicker/assets/byt-DuUB1dve.jpg",L="/moor-clicker/assets/coin-DHADmtpw.jpg",w="/moor-clicker/assets/drova-B1_3CkoW.jpg",j="/moor-clicker/assets/drovosek-0Gu3FA4h.jpg",P="/moor-clicker/assets/sand-NAU3yeRp.jpg",I="/moor-clicker/assets/svai-C0htLECH.jpg",z="/moor-clicker/assets/trtr-DE8-K9Tz.jpg",_=()=>{const e=document.querySelector("#balance"),t=document.querySelector("#coin"),i=document.querySelector("#income"),r=document.querySelector("#cards");if(!e||!t||!i||!r)throw new Error("oops");return{balance:e,cardsList:r,coin:t,income:i}},$=e=>{const t=document.getElementById(`card-${e}-level`),i=document.getElementById(`card-${e}-income`),r=document.getElementById(`card-${e}-next-income`),n=document.querySelector(`#card-${e}-btn`);if(!t||!i||!r||!n)throw new Error("oops");return{levelLabel:t,incomeLabel:i,nextIncomeLabel:r,btn:n}},k=e=>new URL(Object.assign({"/src/utils/pics/byt.jpg":E,"/src/utils/pics/coin.jpg":L,"/src/utils/pics/drova.jpg":w,"/src/utils/pics/drovosek.jpg":j,"/src/utils/pics/sand.jpg":P,"/src/utils/pics/svai.jpg":I,"/src/utils/pics/trtr.jpg":z})[`/src/utils/pics/${e}.jpg`],import.meta.url).href,M=e=>{const{pic:t,title:i,id:r}=e;return`<div class="col-6 flex-grow-1">
    <div class="border rounded-2 p-2 vstack h-100 overflow-hidden">
      <div class="d-flex flex-grow-1 mx-n2 mt-n2" style="max-height: 90px;">
        <img class="img-fluid" src="${k(t)}" style="object-fit: cover;" />
      </div>
      <div class="d-flex justify-content-between align-items-center w-100">
        <div class="fs-4">${i}</div>
        <div class="badge text-bg-light" id="card-${r}-level"></div>
      </div>
      <div class="vstack align-items-center flex-grow-0">
        <div class="h6" id="card-${r}-income"></div>
        <div class="h6 text-success" id="card-${r}-next-income"></div>
      </div>
      <button id="card-${r}-btn" class="btn"></button>
    </div>
  </div>`},S=1.1,T=1.6,C=(e,t)=>{const{initialCpm:i,initialPrice:r}=h[e],n=t>0?i*S**t:i;return{nextPrice:t>0?r*T**t:r,nextCpm:n}},D=(e,t)=>Array.from({length:t}).reduce((i,r,n)=>i+C(e,n).nextCpm,0),b=e=>e.toLocaleString("RU-ru",{style:"currency",currency:"rub",maximumFractionDigits:2}),f=(e,t)=>"+"+e.toLocaleString("RU-ru",{maximumFractionDigits:2})+(t?"&uarr;":""),u=["Card1","Card2","Card3","Card4","Card5","Card6"],O=e=>{const{coin:t,balance:i,income:r}=_(),n=()=>{const{realCoinz:o,lastEvent:c}=e.getState();i.innerText=b(o),r.innerText=f(c.totalIncome),u.forEach(s=>{const a=c.cards[s],{nextCpm:p,nextPrice:g}=C(s,a),l=c.income[s],v=g>Math.max(c.totalIncome,o),{levelLabel:m,incomeLabel:x,nextIncomeLabel:y,btn:d}=$(s);m.innerText=String(a),a>0&&(m.classList.add("text-bg-success"),m.classList.remove("text-bg-light")),x.innerText=f(l),y.innerHTML=f(p,!0),d.innerText=b(g),d.disabled=v,v?(d.classList.remove("btn-primary"),d.classList.add("btn-outline-secondary")):(d.classList.remove("btn-outline-secondary"),d.classList.add("btn-primary"))})};setInterval(n,1e3),u.forEach(o=>{const c=document.getElementById(`card-${o}-btn`);if(!c)throw new Error("oops, no card");c.addEventListener("click",()=>{e.upCard(o),n()})}),t.addEventListener("click",()=>{e.click(),n()}),t.addEventListener("mousedown",({offsetX:o,offsetY:c})=>{const s=Math.round((o-60)/2),a=Math.round((c-60)/2);t.style.transform=`rotateX(${-a}deg) rotateY(${s}deg)`,t.classList.remove("shadow")}),t.addEventListener("mouseup",()=>{t.style.transform="",t.classList.add("shadow")})},R=()=>{let e=0;const t={},i={};return u.forEach(r=>{const n=Math.round(Math.random()*5),o=D(r,n);t[r]=n,i[r]=o,e+=o}),{cards:t,income:i,totalIncome:e}},A=()=>{const e={coinz:99999,timestamp:Date.now(),...R()},t=[],i=()=>{t.push(e)},r=()=>{const c=t.at(-1);if(!c)throw new Error("could not start game");const s=Date.now(),a=c.coinz+(s-c.timestamp)/1e3*c.totalIncome;return{lastEvent:c,realCoinz:a}},n=()=>{const{lastEvent:c,realCoinz:s}=r(),a={...c,coinz:Math.max(s,c.coinz)+10,timestamp:Date.now()};return t.push(a),a},o=c=>{const{lastEvent:s,realCoinz:a}=r(),{nextPrice:p,nextCpm:g}=C(c,s.cards[c]);if(p>Math.max(a,s.coinz))throw new Error("not enough coinz");const l={...s,cards:{...s.cards,[c]:s.cards[c]+=1},coinz:Math.max(a,s.coinz)-p,timestamp:Date.now()};return l.income={...l.income,[c]:l.income[c]+g},l.totalIncome=u.reduce((v,m)=>v+=l.income[m],0),t.push(l),l};return i(),{getState:r,click:n,upCard:o}},G=()=>{const e=A(),{balance:t,cardsList:i,income:r}=_();(()=>{const{realCoinz:o,lastEvent:c}=e.getState();t.innerText=b(o),r.innerText=f(c.totalIncome),i.innerHTML=u.map(s=>M(h[s])).join("")})(),O(e)};G();
