(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const y="/moor-clicker/assets/byt-DuUB1dve.jpg",E="/moor-clicker/assets/coin-DHADmtpw.jpg",w="/moor-clicker/assets/drova-B1_3CkoW.jpg",L="/moor-clicker/assets/drovosek-0Gu3FA4h.jpg",$="/moor-clicker/assets/sand-NAU3yeRp.jpg",j="/moor-clicker/assets/svai-C0htLECH.jpg",P="/moor-clicker/assets/trtr-DE8-K9Tz.jpg",C={Card1:{name:"Трактор",initialPrice:100,initialCpm:5,pic:"trtr"},Card2:{name:"Песок",initialPrice:80,initialCpm:3,pic:"sand"},Card3:{name:"Дачнег",initialPrice:120,initialCpm:1,pic:"drovosek"},Card4:{name:"Сваи",initialPrice:320,initialCpm:14,pic:"svai"},Card5:{name:"Бытовка",initialPrice:100,initialCpm:1,pic:"byt"},Card6:{name:"Дрова",initialPrice:20,initialCpm:1,pic:"drova"}},f=1.1,I=1.6,x=(n,e)=>{const{initialCpm:r,initialPrice:i}=C[n],o=e>0?r*f**(e-1):0,s=e>0?r*f**e:r,t=e>0?i*I**e:i;return{totalCpm:o,nextPrice:t,nextCpm:s}},_=()=>{const n=document.querySelector("#balance"),e=document.querySelector("#coin"),r=document.querySelector("#income"),i=document.querySelector("#cards");if(!n||!e||!r||!i)throw new Error("oops");return{balance:n,cardsList:i,coin:e,income:r}},z=n=>{const e=document.getElementById(`card-${n}-level`),r=document.getElementById(`card-${n}-income`),i=document.getElementById(`card-${n}-next-income`),o=document.querySelector(`#card-${n}-btn`);if(!e||!r||!i||!o)throw new Error("oops");return{levelLabel:e,incomeLabel:r,nextIncomeLabel:i,btn:o}},g=["Card1","Card2","Card3","Card4","Card5","Card6"],k=n=>{const{coin:e,balance:r,income:i}=_(),o=()=>{const{realCoinz:s,lastEvent:t}=n.getState();r.innerText="$"+s.toFixed(2),i.innerText="+"+t.totalIncome.toFixed(2)+"/sec",g.forEach(c=>{const a=t.cards[c],{nextCpm:m,nextPrice:u}=x(c,a),d=t.income[c],p=u>Math.max(t.totalIncome,s),{levelLabel:l,incomeLabel:b,nextIncomeLabel:h,btn:v}=z(c);l.innerText=String(a),a>0&&(l.classList.add("text-bg-success"),l.classList.remove("text-bg-light")),b.innerText=d.toFixed(2)+"/sec",h.innerText=`+${m.toFixed(2)}/sec`,v.innerText=`$${u.toFixed(2)}`,v.disabled=p,p?(v.classList.remove("btn-primary"),v.classList.add("btn-outline-secondary")):(v.classList.remove("btn-outline-secondary"),v.classList.add("btn-primary"))})};setInterval(o,1e3),g.forEach(s=>{const t=document.getElementById(`card-${s}-btn`);if(!t)throw new Error("oops, no card");t.addEventListener("click",()=>{n.upCard(s),o()})}),e.addEventListener("click",()=>{n.click(),o()}),e.addEventListener("mousedown",({offsetX:s,offsetY:t})=>{const c=Math.round((s-60)/2),a=Math.round((t-60)/2);e.style.transform=`rotateX(${-a}deg) rotateY(${c}deg)`,e.classList.remove("shadow")}),e.addEventListener("mouseup",()=>{e.style.transform="",e.classList.add("shadow")})},F=()=>{const n={coinz:0,timestamp:Date.now(),cards:Object.fromEntries(g.map(t=>[t,0])),income:Object.fromEntries(g.map(t=>[t,0])),totalIncome:0},e=[],r=()=>{e.push(n)},i=()=>{const t=e.at(-1);if(!t)throw new Error("could not start game");const c=Date.now(),a=t.coinz+(c-t.timestamp)/1e3*t.totalIncome;return{lastEvent:t,realCoinz:a}},o=()=>{const{lastEvent:t,realCoinz:c}=i(),a={...t,coinz:Math.max(c,t.coinz)+10,timestamp:Date.now()};return e.push(a),a},s=t=>{const{lastEvent:c,realCoinz:a}=i(),{nextPrice:m,nextCpm:u}=x(t,c.cards[t]);if(m>Math.max(a,c.coinz))throw new Error("not enough coinz");const d={...c,cards:{...c.cards,[t]:c.cards[t]+=1},coinz:Math.max(a,c.coinz)-m,timestamp:Date.now()};return d.income={...d.income,[t]:d.income[t]+u},d.totalIncome=g.reduce((p,l)=>p+=d.income[l],0),e.push(d),d};return r(),{getState:i,click:o,upCard:s}},T=n=>new URL(Object.assign({"/src/utils/pics/byt.jpg":y,"/src/utils/pics/coin.jpg":E,"/src/utils/pics/drova.jpg":w,"/src/utils/pics/drovosek.jpg":L,"/src/utils/pics/sand.jpg":$,"/src/utils/pics/svai.jpg":j,"/src/utils/pics/trtr.jpg":P})[`/src/utils/pics/${n}.jpg`],import.meta.url).href,O=()=>{const n=F(),{balance:e,cardsList:r,income:i}=_(),o=t=>{const{lastEvent:c,realCoinz:a}=n.getState(),m=c.cards[t],u=c.income[t],d=C[t],{nextCpm:p,nextPrice:l}=x(t,m),b=l>Math.max(c.totalIncome,a);return`<div class="col-6 flex-grow-1">
      <div class="border rounded-2 p-2 vstack gap-2 h-100">
        <div class="d-flex justify-content-between align-items-start w-100">
          <div class="h4">${d.name}</div>
          <div class="badge text-bg-light" id="card-${t}-level">${m}</div>
        </div>
        <div class="d-flex flex-grow-1" style="max-width: 100%; max-height: 90px;">
          <img class="img-fluid" src="${T(d.pic)}" style="object-fit: cover;" />
        </div>
        <div class="vstack align-items-center flex-grow-0">
          <div class="h6" id="card-${t}-income">${u.toFixed(2)}/sec</div>
          <div class="h6 text-success" id="card-${t}-next-income">+${p.toFixed(2)}/sec</div>
        </div>
        <button id="card-${t}-btn" class="btn btn-outline-${b?"secondary":"primary"}" ${b?'disabled="disabled"':""}>$${l.toFixed(2)}</button>
      </div>
    </div>`};(()=>{const{realCoinz:t,lastEvent:c}=n.getState();e.innerText="$"+t.toFixed(2),i.innerText="+"+c.totalIncome.toFixed(2)+"/sec",r.innerHTML=g.map(o).join("")})(),k(n)};O();
